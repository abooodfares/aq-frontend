/* Real Estate Map Container */
.real-estate-map {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    direction: rtl;
}

/* Left Sidebar - Filters */
.left-sidebar {
    position: absolute;
    left: 20px;
    top: 20px;
    /* Start from top */
    /* transform: translateY(-50%); Removed vertical centering */
    width: 320px;
    height: auto;
    max-height: 90vh;
    /* Increased max-height */
    background: #f8f9fa;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    z-index: 100;
    border-radius: 16px;
    transition: transform 0.3s ease, margin 0.3s ease, opacity 0.3s ease;
}

.left-sidebar.closed {
    transform: translateX(-150%);
    /* Just move left, no vertical shift needed */
    opacity: 0;
    pointer-events: none;
}



.sidebar-content {
    padding: 20px;
    height: 100%;
    overflow-y: auto;
}

.location-row {
    display: flex;
    gap: 12px;
}

.location-row .filter-group {
    flex: 1;
    margin-bottom: 20px;
}

/* Filter Groups */
.filter-group {
    margin-bottom: 20px;
}

.filter-group label {
    display: block;
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 8px;
    color: #333;
}

.filter-group select,
.filter-group input[type="number"] {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    font-size: 14px;
    background: white;
    transition: border-color 0.2s;
}

.filter-group select:focus,
.filter-group input[type="number"]:focus {
    outline: none;
    border-color: #1a2332;
}

/* Main Navbar */
.main-navbar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 64px;
    background: #1a1f3a;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 16px;
    z-index: 200;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    color: white;
    direction: rtl;
}

.navbar-right,
.navbar-left {
    display: flex;
    align-items: center;
    gap: 16px;
}

/* Default: Hide toggles on desktop if desired, or show them.
   User request: "menu button hidden when desktop"
   We will hide it by default for desktop, and show it on mobile in media query.
   Actually, the user *just* added them to navbar.
   If we hide them on desktop, how do they open the sidebar? 
   Maybe on desktop the sidebar is always open? Or maybe there's another way?
   Wait, if we hide the BUTTON, then the user cannot toggle it.
   Let's assume the user wants the sidebar to be permanently visible or managed differently on desktop,
   OR simply that the toggle button itself is hidden (maybe sidebar is always open?).
   
   Let's update .sidebar-toggle-btn to be display: none (or hidden via media query) for desktop.
*/

.sidebar-toggle-btn {
    display: none;
    /* Hidden by default (Desktop) - mainly for the Right menu */
    background: transparent;
    border: none;
    color: white;
    cursor: pointer;
    padding: 8px;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background 0.2s;
}

/* Show the LEFT toggle (Filters) on desktop */
.navbar-left .sidebar-toggle-btn {
    display: flex;
}

@media (max-width: 768px) {

    /* Show ALL toggles (Left and Right) on mobile */
    .sidebar-toggle-btn {
        display: flex;
    }
}

.sidebar-toggle-btn:hover {
    background: rgba(255, 255, 255, 0.1);
}

.navbar-logo h1 {
    font-size: 20px;
    font-weight: 700;
    color: white;
    margin: 0;
}

/* Real Estate Map Container */
.real-estate-map {
    position: fixed;
    top: 64px;
    /* Move down by navbar height */
    left: 0;
    width: 100vw;
    height: calc(100vh - 64px);
    /* Subtract navbar height */
    display: flex;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    direction: rtl;
}

/* Property Type Toggle */
.property-type-toggle {
    display: flex;
    gap: 8px;
    background: #f5f5f5;
    padding: 4px;
    border-radius: 8px;
}

.property-type-toggle button {
    flex: 1;
    padding: 10px;
    border: none;
    background: transparent;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    color: #666;
}

.property-type-toggle button.active {
    background: #1a2332;
    color: white;
}

/* Search Button */
.search-btn {
    width: 100%;
    padding: 12px;
    background: #1a2332;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
}

.search-btn:hover {
    background: #252d3f;
}

/* Range Filter */
.range-filter {
    padding: 16px;
    background: #f9fafb;
    border-radius: 8px;
}

.range-inputs {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
}

.range-inputs input[type="number"] {
    flex: 1;
    padding: 8px;
    font-size: 13px;
}

.range-inputs span {
    color: #999;
}

.range-slider {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: #e0e0e0;
    outline: none;
    -webkit-appearance: none;
    margin-bottom: 8px;
}

.range-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #1a2332;
    cursor: pointer;
}

.range-slider::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #1a2332;
    cursor: pointer;
    border: none;
}

.range-labels {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #666;
}

/* Advanced Toggle */
.advanced-toggle {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    background: #f9fafb;
    border-radius: 8px;
}

.advanced-toggle span {
    font-size: 14px;
    font-weight: 500;
    color: #333;
}

/* Toggle Switch */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 48px;
    height: 24px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: 0.3s;
    border-radius: 24px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
}

input:checked+.toggle-slider {
    background-color: #1a2332;
}

input:checked+.toggle-slider:before {
    transform: translateX(24px);
}

/* Advanced Filters */
.advanced-filters {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid #e0e0e0;
}

.advanced-filters h3 {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 12px;
    color: #333;
}

.date-filters {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.date-row {
    display: flex;
    gap: 8px;
}

.date-row select {
    flex: 1;
    padding: 8px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    font-size: 13px;
}



/* Map Container */
.map-container-main {
    flex: 1;
    position: relative;
}

/* Property Marker */
.property-marker {
    cursor: pointer;
    transition: transform 0.2s;
}

.property-marker:hover {
    transform: scale(1.1);
}

.price-tag {
    background: #1a2332;
    color: white;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 600;
    white-space: nowrap;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    position: relative;
}

.price-tag::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 6px solid #1a2332;
}

/* Right Sidebar - Navigation */
.right-sidebar {
    position: relative;
    width: 280px;
    background: #1a1f3a;
    color: white;
    z-index: 100;
    transition: transform 0.3s ease;
    display: flex;
    flex-direction: column;
}

.right-sidebar.closed {
    transform: translateX(100%);
    margin-right: -280px;
}



.right-sidebar .sidebar-content {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 0;
}

/* Navigation Menu */
.nav-menu {
    flex: 1;
    padding: 20px 0;
    overflow-y: auto;
}

.nav-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 24px;
    color: #cbd5e1;
    text-decoration: none;
    transition: all 0.2s;
    border-right: 3px solid transparent;
}

.nav-item:hover {
    background: rgba(255, 255, 255, 0.05);
    color: white;
    border-right-color: #6366f1;
}

.nav-item .icon {
    font-size: 20px;
}

/* Sidebar Footer */
.sidebar-footer {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding: 16px 0;
}

.footer-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 24px;
    color: #cbd5e1;
    text-decoration: none;
    transition: all 0.2s;
    font-size: 14px;
}

.footer-item:hover {
    background: rgba(255, 255, 255, 0.05);
    color: white;
}

.user-info {
    display: flex;
    flex-direction: column;
    padding: 16px 24px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    margin-top: 8px;
}

.user-info span:first-child {
    font-weight: 600;
    font-size: 15px;
    margin-bottom: 4px;
}

.user-info .email {
    font-size: 13px;
    color: #94a3b8;
}

/* Mapbox Controls Customization */
.mapboxgl-ctrl-group {
    background: white !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
    border: none !important;
    border-radius: 8px !important;
}

.mapboxgl-ctrl-group button {
    width: 32px !important;
    height: 32px !important;
}

/* Responsive Design */
@media (max-width: 768px) {
    .real-estate-map {
        flex-direction: column;
        /* Start stacking if needed, but absolute sidebars override this */
    }

    .left-sidebar,
    .right-sidebar {
        position: absolute;
        height: 100%;
        width: 85%;
        max-width: 360px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }

    .left-sidebar {
        left: 0;
        height: auto;
        /* Let content dictate height, or keep fixed height? User asked for 'height of form start from top'. Maybe max-height is better? Or stick to 40% but at top? 'height is 40%' was previous. Now 'height of form start from top'. I will interpret as: Position at top, height auto (or restricted). But previous req was 'small height is 40%'. I will keep 40% height but move position to Top. */
        height: 50%;
        /* Slightly larger for easier reading */
        top: 20px;
        /* Start from top */
        border-radius: 0 16px 16px 0;
        /* Attach to left edge? No, it's floating card style users liked. Let's keep card style but top. */
        width: 90%;
        /* Center horiz slightly */
        left: 5%;
        /* Center horiz */
        border-radius: 16px;
    }

    .right-sidebar {
        right: 0;
    }

    /* Reset margins for mobile absolute positioning */
    .left-sidebar.closed {
        margin-left: 0;
    }

    .right-sidebar.closed {
        margin-right: 0;
    }

    /* Larger touch targets for toggles */
    /* Larger touch targets for toggles, fixed to screen edges */
    .sidebar-toggle {
        display: flex;
        /* Show on mobile */
        position: fixed;
        top: 50%;
        width: 40px;
        height: 60px;
        font-size: 16px;
        z-index: 102;
    }

    /* Left Sidebar Toggle (controls filter on Left) -> Left Edge */
    .sidebar-toggle.left {
        left: 0;
        right: auto;
        border-radius: 0 8px 8px 0;
        /* Rounded on right side */
        border-left: none;
        border-right: 1px solid #e0e0e0;
    }

    /* Right Sidebar Toggle (controls nav on Right) -> Right Edge */
    .sidebar-toggle.right {
        right: 0;
        left: auto;
        border-radius: 8px 0 0 8px;
        /* Rounded on left side */
        border-right: none;
        border-left: 1px solid #e0e0e0;
    }

    /* Remove the complex translateX logic for mobile */
    /* Remove the complex translateX logic for mobile */
    /* Since buttons are now outside, they don't move with sidebar. 
       We just need to ensure correct icon rotation or state? 
       Actually, if they are fixed at edge, they don't move. 
       Only the ICON might need to change, but the text changes in JS (arrow direction).
       So we probably don't need 'rotate' logic anymore if arrows are text.
       However, if we want the arrow to flip based on state...
       The JS logic {isOpen ? '◀' : '▶'} handles the arrow direction characters directly.
       So we DON'T need CSS rotation for that.
       We should clean up the 'rotate' styles.
    */
}

/* Scrollbar Styling */
.sidebar-content::-webkit-scrollbar {
    width: 6px;
}

.sidebar-content::-webkit-scrollbar-track {
    background: transparent;
}

.sidebar-content::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 3px;
}

.sidebar-content::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.3);
}

.right-sidebar .sidebar-content::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
}

.right-sidebar .sidebar-content::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}